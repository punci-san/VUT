Implementační dokumentace k 2. úloze do IPP 2018/2019
Jméno a příjmení: Matúš Škuta
Login: xskuta04

## Implementation of tests

Tests are implemented in three different classes, where each one got her own task. `ArgumentChecker`
is for setting program based on given arguments. `FileLoader` is for loading files from folders recursively. `TestExecuter`
simply grabs all the files that were loaded by FileLoader and use them to interpret to test him.

## Checking arguments

In the constructor, all arguments are loaded into the array and the name of the program is set to be printed
in help. When function `ExecuteArguments` is called, we start looping through all these arguments and setting
variables based on what was given as argument. When all this is done we call `CallGivenFunctions` which determinates
what type of testing we need to do if given scripts exist and then we call class to load all files.

## Loading files

In the constructor, we just initialize `FileArray` which will contain all the tests that will be loaded later.
After `LoadFiles` is called we start by checking the first given directory if it exists. After we check if the recursive method was set we start iterating through each directory found. Iterating in each directory is done by class
`FilesystemIterator` which returns all files and directories in the given directory. With this, we can sort what is file and what is the directory. For each test, we check if it contains all requested files if not then they are created.

## Executing tests

Based on what type of test is called we start executing these types of tests. When argument `--parse-only`
is specified we start executing tests that are only for the parser. This test requires one temporary file which is created and then used in all the tests. For each test, we compare return value of parser and required return value
from the test and if these are the same we compare temporary file which contains generated XML with required XML given in test with tool
`jexamxml` which is contained in `/pub/courses/ipp/jexamxml/jexamxml.jar`. Integer tests
are basically the same as parser tests expect we compare outputs with tool `diff`. Next type of test is both
which XML generated by the parser is forwarded to interpret and again is tested with `example` and diff. Each test
is saved in the array from which is generated **HTML** file.

## Implementation of interpret

Interpret was implemented in python3.6 with the help of `dom.minidom` and some regular expressions.

## Loading xml

XML loading is done using `dom.minidom` which convert XML into __DOMTree__ and from this tree is created
documentElement from which we can load elements. The whole XML is checked for given syntax and if something is off
error is returned. Loaded instructions are saved into a dictionary based on the order given by attribute `order`.

## Syntax

Syntax control is exactly the same as was done in parser except in lexical, where I replaced the state automat with
regular expressions. Lexical analysis is checked after the syntax analysis to make the implementation little bit easier.

## Program execution

The program is saved in a dictionary which is numbered based on the order given in XML file. The first thing that is done is to go through every instruction and look for __LABEL__ for which we save the index of that particular label into label dictionary for later usage. There are implemented two types of stacks one is for data
and the other is for saving indexes of __CALL__ where we can then jump after __RETURN__. All frames are implemented as dictionaries for easier
access to values saved behind the names of variables. Other instructions just work with these frames.

## Extension

One of the extensions to implement was the stack, which supports operands that work with the stack. These operands
work on the principle of popping values that will be used in the instruction and pushing the result back onto the stack.
